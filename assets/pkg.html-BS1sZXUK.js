import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as d,c as p,b as e,e as s,d as a,a as o}from"./app-C0aX9A6w.js";const c="/freebsd-book/assets/pkg-rmleaf-DHvihjLQ.png",r={},t=o(`<h1 id="第-2-节-pkg" tabindex="-1"><a class="header-anchor" href="#第-2-节-pkg"><span>第 2 节 pkg</span></a></h1><h2 id="什么是-pkg" tabindex="-1"><a class="header-anchor" href="#什么是-pkg"><span>什么是 <code>pkg</code></span></a></h2><p><code>pkg</code> 是 FreeBSD 自带的<a href="404">软件包管理工具</a>。通过 <code>pkg</code> 可以安装、删除第三方软件。</p><h2 id="pkg-的安装" tabindex="-1"><a class="header-anchor" href="#pkg-的安装"><span>pkg 的安装</span></a></h2><p>在刚刚安装好的 FreeBSD 系统中，并不带有 <code>pkg</code> 这个软件，而是判断 <code>pkg</code> 是否存在并能下载完整的 <code>pkg</code> 的程序。因为实际上 <code>pkg</code> 本身也可以视作 “第三方软件包”。这个程序也叫 “pkg”，执行这个命令会看到他的输出：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ $ pkg</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The package management tool is not yet installed on your system.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Do you want to fetch and install it now? [y/N]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个 <code>pkg</code> 会询问是否安装真正的 <code>pkg</code>。输入 “y”，开始下载安装。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>必须用 <code>root</code> 执行 <code>pkg</code> 命令，否则会提示：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">alex11@freebsd:~ $ pkg</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The package management tool is not yet installed on your system.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Do you want to fetch and install it now? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Bootstrapping pkg from pkg+http://pkg.FreeBSD.org/FreeBSD:14:amd64/quarterly, please wait...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Verifying signature with trusted certificate pkg.freebsd.org.2013102301... done</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">pkg: failed to extract pkg-static: Failed to create dir &#39;/usr/local/sbin&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际上只要想安装、卸载软件包或更新 <code>pkg</code> 的数据库，都需要以 <code>root</code> 身份执行。一些查询命令比如 <code>pkg search</code> 则不需要。这与 Linux 上的软件包管理器类似。</p></div><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The package management tool is not yet installed on your system.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Do you want to fetch and install it now? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Bootstrapping pkg from pkg+http://pkg.FreeBSD.org/FreeBSD:14:amd64/quarterly, please wait...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Verifying signature with trusted certificate pkg.freebsd.org.2013102301... done</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Installing pkg-1.21.1...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Extracting pkg-1.21.1: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">pkg: not enough arguments</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Usage: pkg [-v] [-d] [-l] [-N] [-j &lt;jail name or id&gt;|-c &lt;chroot path&gt;|-r &lt;rootdir&gt;] [-C &lt;configuration file&gt;] [-R &lt;repo config dir&gt;] [-o var=value] [-4|-6] &lt;command&gt; [&lt;args&gt;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">For more information on available commands and options see &#39;pkg help&#39;.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>安装好 <code>pkg</code> 后会自动把这次执行的参数传给 <code>pkg</code>。比如，如果你在第一次直接执行 <code>pkg install git</code>，则会在安装好 <code>pkg</code> 后直接执行这个命令，安装 <code>git</code> 软件包。</p></div><h2 id="pkg-的使用" tabindex="-1"><a class="header-anchor" href="#pkg-的使用"><span><code>pkg</code> 的使用</span></a></h2><h3 id="更新-pkg-数据库、" tabindex="-1"><a class="header-anchor" href="#更新-pkg-数据库、"><span>更新 <code>pkg</code> 数据库、</span></a></h3><p>以 <code>root</code> 执行 <code>pkg update</code>，可以更新 <code>pkg</code> 的数据库。虽然这个命令一般会在安装软件包之前自动执行，但还是建议首先手动执行一遍。</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg update</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Updating FreeBSD repository catalogue...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Fetching meta.conf: 100%    178 B   0.2kB/s    00:01</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Fetching data.pkg: 100%    7 MiB  75.7kB/s    01:36</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Processing entries: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">FreeBSD repository update completed. 34054 packages processed.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">All repositories are up to date.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="搜索软件包" tabindex="-1"><a class="header-anchor" href="#搜索软件包"><span>搜索软件包</span></a></h3><p><code>pkg search</code> 用于搜索软件。这个命令不需要以 <code>root</code> 身份执行。</p><p>例如，想搜索 <code>git</code> 软件包：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">alex11@freebsd:~ $ pkg search git</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">R-cran-git2r-0.27.1_4          Provides Access to Git Repositories</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">R-cran-gitcreds-0.1.2_1        Query &#39;git&#39; Credentials from &#39;R&#39;</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># 此处省略若干行</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">uwsgitop-0.10_1                uWSGI top-like app</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">xtgyoretsu-git20140822         Extended ncurses version of &quot;Renshu-cho gyoretsu&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果搜索得到的内容过多，超过了终端范围，可以用 <code>more</code> 工具。具体做法如下：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">alex11@freebsd:~ $ pkg search git | </span><span style="color:#795E26;--shiki-dark:#DCDCAA;">more</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中，<code>|</code> 是回车上方那个键，按住 <code>Shift</code> 输入，叫做管道符。这个命令的实际含义是，将 <code>pkg</code> 命令的输出传递给 <code>more</code> 命令处理。</p><p>此时，最后一行应该出现类似</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">--More--(byte 2160)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>用上下键即可浏览，<code>PgUp</code> 和 <code>PgDn</code> 可以快速翻页。注意，翻页到最后继续按下键会直接退出。所以你可能要注意 <code>--More--(END)</code> 的提示。如果你不想自动退出，可以把 <code>more</code> 换成 <code>less</code>。<code>less</code> 会在最后一行显示一个冒号。按 <code>q</code> 可以退出 <code>more</code> 或 <code>less</code>。</p></div><h3 id="安装软件包" tabindex="-1"><a class="header-anchor" href="#安装软件包"><span>安装软件包</span></a></h3><p>使用 <code>pkg install</code> 命令可以安装软件包。要以 <code>root</code> 身份执行。例如，如果想要安装 <code>pkg-rmleaf</code> 这个软件包：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg install pkg-rmleaf</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Updating FreeBSD repository catalogue...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">FreeBSD repository is up to date.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">All repositories are up to date.</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The following 1 package(s) will be affected (of 0 checked):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">New packages to be INSTALLED:</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">        pkg-rmleaf: 0.4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Number of packages to be installed: 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">2 KiB to be downloaded.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Proceed with this action? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/1] Fetching pkg-rmleaf-0.4.pkg: 100%    2 KiB   2.5kB/s    00:01</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Checking integrity... done (0 conflicting)</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/1] Installing pkg-rmleaf-0.4...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/1] Extracting pkg-rmleaf-0.4: 100%</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除软件包" tabindex="-1"><a class="header-anchor" href="#删除软件包"><span>删除软件包</span></a></h3><p><code>pkg delete</code> 命令可以删除软件包。要以 <code>root</code> 身份执行。例如：要删除 <code>pkg-rmleaf</code> 软件包：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg delete pkg-rmleaf</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Checking integrity... done (0 conflicting)</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Deinstallation has been requested for the following 1 packages (of 0 packages in the universe):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Installed packages to be REMOVED:</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">        pkg-rmleaf: 0.4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Number of packages to be removed: 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Proceed with deinstalling packages? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/1] Deinstalling pkg-rmleaf-0.4...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/1] Deleting files for pkg-rmleaf-0.4: 100%</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">知识</p><p>软件包之间有 “依赖关系”。意思是，软件包 A 必须依赖软件包 B 才能正常运行。而软件包 B 又可能依赖软件包 C。因此，如果想安装软件包 A，则会自动把软件包 B 和软件包 C 一起安装。此时如果你想移除软件包 C，由于这时软件包 AB 都无法正常运行，所以会把他们一起移除以免发生意料之外的错误。因此在移除软件包时要注意看一下提示，哪些包会被移除，以免不小心移除了需要的包。</p></div><h4 id="使用-pkg-rmleaf-删除软件包" tabindex="-1"><a class="header-anchor" href="#使用-pkg-rmleaf-删除软件包"><span>使用 <code>pkg-rmleaf</code> 删除软件包</span></a></h4><p>因为要尽量避免破坏我们刚刚提到的依赖关系，前人写成了一个用于删除软件包的脚本，<s>就是我们刚刚装了又删的</s> <code>pkg-rmleaf</code>。</p><p>在用 <code>pkg</code> 安装 <code>pkg-rmleaf</code> （你已经学会了，对吧？）后，以 <code>root</code> 身份执行 <code>pkg-rmleaf</code>。在统计 “叶软件包”（也就是不被任何软件包依赖的软件包）后，会弹出一个窗口。</p><figure><img src="`+c+`" alt="pkg-rmleaf 窗口" tabindex="0"><figcaption>pkg-rmleaf 窗口</figcaption></figure><p>这个窗口类似安装时的界面，事实上也是同一个工具绘制的，因此操作也差不多。使用上下键移动光标，空格键选中你想移除的软件包，选中 <code>OK</code> 并回车，就会删除选中的软件包。之后脚本会统计删除这些软件包后多出来的 “叶软件包”（也就是说，这些软件包之前只被被删除的软件包依赖，把这些软件包删除后就没有任何软件包依赖他们了），这时可以从中继续选择要删除的软件包，层层递进直到没有任何新的 “叶软件包”。这种删除方式最大程度避免了依赖导致的误删除。</p><div class="hint-container warning"><p class="hint-container-title">注意：给 FreeBSD 15 使用者</p><p>在 FreeBSD 15 中，这个脚本不起作用，因为脚本中使用的 <code>dialog</code> 在 FreeBSD 15 中被完全替换成了 <code>bsddialog</code>。解决方法有：</p><ul><li>手动编译 FreeBSD 15，在编译时使用选项 <code>WITH_DIALOG</code></li><li>编辑 <code>/usr/local/sbin/pkg-rmleaf</code>，把第 34 行 <code>FmtDialog=&quot;dialog --checklist \\&quot;Leaf Packages: %s\\&quot; $rows $cols $height %s&quot;</code> 改为 <code>FmtDialog=&quot;bsddialog --output-separator \\&quot; \\&quot; --checklist \\&quot;Leaf Packages: %s\\&quot; $rows $cols $height %s&quot;</code></li></ul></div><h3 id="删除自动安装的软件包" tabindex="-1"><a class="header-anchor" href="#删除自动安装的软件包"><span>删除自动安装的软件包</span></a></h3><p>在安装有依赖的软件包时会把依赖一并安装，此时如果只删除主动安装的软件包，这些依赖并不会被移除，造成残留。可以用 <code>root</code> 执行 <code>pkg autoremove</code> 命令，把这些自动安装的，现在不被任何软件包依赖的软件包删除。这个操作不会删除主动安装的软件包。例如，在安装软件包 <code>python39</code> 时，会自动安装 <code>gettext-runtime</code> <code>indexinfo</code> <code>libffi</code> <code>mpdecimal</code> <code>readline</code> 这些软件包。在删除 <code>python39</code> 后，用 <code>pkg autoremove</code> 可以把他们都删除。</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg autoremove</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Checking integrity... done (0 conflicting)</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Deinstallation has been requested for the following 5 packages:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Installed packages to be REMOVED:</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> gettext-runtime: 0.22.5</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> indexinfo: 0.3.1</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> libffi: 3.4.4_1</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> mpdecimal: 4.0.0</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> readline: 8.2.10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Number of packages to be removed: 5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The operation will free 4 MiB.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Proceed with deinstalling packages? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/5] Deinstalling libffi-3.4.4_1...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/5] Deleting files for libffi-3.4.4_1: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[2/5] Deinstalling readline-8.2.10...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[2/5] Deleting files for readline-8.2.10: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[3/5] Deinstalling gettext-runtime-0.22.5...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[3/5] Deleting files for gettext-runtime-0.22.5: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[4/5] Deinstalling indexinfo-0.3.1...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[4/5] Deleting files for indexinfo-0.3.1: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[5/5] Deinstalling mpdecimal-4.0.0...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[5/5] Deleting files for mpdecimal-4.0.0: 100%</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你主动安装了某个软件包，则那个软件包（和他的依赖）不会被删除：</p><div class="language-shellsession line-numbers-mode" data-ext="shellsession" data-title="shellsession"><pre class="shiki shiki-themes light-plus dark-plus" style="background-color:#FFFFFF;--shiki-dark-bg:#1E1E1E;color:#000000;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg install gettext-runtime</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># 此处省略输出</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg install python39</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># 此处省略输出</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg delete python39</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># 此处省略输出</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">root@freebsd:~ # pkg autoremove</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Checking integrity... done (0 conflicting)</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Deinstallation has been requested for the following 3 packages:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Installed packages to be REMOVED:</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> libffi: 3.4.4_1</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> mpdecimal: 4.0.0</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"> readline: 8.2.10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Number of packages to be removed: 3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">The operation will free 3 MiB.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">Proceed with deinstalling packages? [y/N]: y</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/3] Deinstalling mpdecimal-4.0.0...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[1/3] Deleting files for mpdecimal-4.0.0: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[2/3] Deinstalling libffi-3.4.4_1...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[2/3] Deleting files for libffi-3.4.4_1: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[3/3] Deinstalling readline-8.2.10...</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;">[3/3] Deleting files for readline-8.2.10: 100%</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># gettext-runtime 因为是主动安装的所以没有被移除。</span></span>
<span class="line"><span style="color:#000000;--shiki-dark:#D4D4D4;"># indexinfo 则是因为是 gettext-runtime 的依赖也没有被移除。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你之前没有安装某个软件包，在自动移除时又希望把他标记成主动安装的，可以执行 <code>pkg set -A 0 packagename</code>，其中 “packagename” 为软件包名。例如 <code>pkg set -A 0 gettext-runtime</code>，把<code>gettext-runtime</code> 标记为主动安装。如果想标记回自动，可以用 <code>pkg set -A 1 packagename</code>。</p><div class="hint-container caution"><p class="hint-container-title">警告：给 Linux 使用者</p><p>重新执行一遍 <code>pkg install</code> 并不能把某个已安装的包设置为主动安装。这与 <code>apt</code> 等包管理器不同。</p></div><h2 id="更多信息" tabindex="-1"><a class="header-anchor" href="#更多信息"><span>更多信息</span></a></h2>`,40),k={href:"https://man.freebsd.org/cgi/man.cgi?query=pkg&sektion=7",target:"_blank",rel:"noopener noreferrer"},D=e("code",null,"pkg",-1),h={href:"https://man.freebsd.org/cgi/man.cgi?query=pkg&sektion=8",target:"_blank",rel:"noopener noreferrer"},g=e("code",null,"pkg",-1);function v(u,m){const n=l("ExternalLinkIcon");return d(),p("div",null,[t,e("p",null,[s("可以参考手册 "),e("a",k,[s("pkg(7)"),a(n)]),s("（未安装时的 "),D,s(" 命令）和 "),e("a",h,[s("pkg(8)"),a(n)]),s("（真正的 "),g,s(" 命令）。")])])}const f=i(r,[["render",v],["__file","pkg.html.vue"]]),F=JSON.parse('{"path":"/pkg-and-ports/pkg.html","title":"第 2 节  pkg","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"什么是 pkg","slug":"什么是-pkg","link":"#什么是-pkg","children":[]},{"level":2,"title":"pkg 的安装","slug":"pkg-的安装","link":"#pkg-的安装","children":[]},{"level":2,"title":"pkg 的使用","slug":"pkg-的使用","link":"#pkg-的使用","children":[{"level":3,"title":"更新 pkg 数据库、","slug":"更新-pkg-数据库、","link":"#更新-pkg-数据库、","children":[]},{"level":3,"title":"搜索软件包","slug":"搜索软件包","link":"#搜索软件包","children":[]},{"level":3,"title":"安装软件包","slug":"安装软件包","link":"#安装软件包","children":[]},{"level":3,"title":"删除软件包","slug":"删除软件包","link":"#删除软件包","children":[{"level":4,"title":"使用 pkg-rmleaf 删除软件包","slug":"使用-pkg-rmleaf-删除软件包","link":"#使用-pkg-rmleaf-删除软件包","children":[]}]},{"level":3,"title":"删除自动安装的软件包","slug":"删除自动安装的软件包","link":"#删除自动安装的软件包","children":[]}]},{"level":2,"title":"更多信息","slug":"更多信息","link":"#更多信息","children":[]}],"git":{"createdTime":1713002680000,"updatedTime":1713013865000,"contributors":[{"name":"Alex6357","email":"73743056+Alex6357@users.noreply.github.com","commits":2}]},"readingTime":{"minutes":7.34,"words":2203},"filePathRelative":"pkg-and-ports/pkg.md","localizedDate":"2024年4月13日","excerpt":"\\n<h2>什么是 <code>pkg</code></h2>\\n<p><code>pkg</code> 是 FreeBSD 自带的<a href=\\"404\\">软件包管理工具</a>。通过 <code>pkg</code> 可以安装、删除第三方软件。</p>\\n<h2>pkg 的安装</h2>\\n<p>在刚刚安装好的 FreeBSD 系统中，并不带有 <code>pkg</code> 这个软件，而是判断 <code>pkg</code> 是否存在并能下载完整的 <code>pkg</code> 的程序。因为实际上 <code>pkg</code> 本身也可以视作 “第三方软件包”。这个程序也叫 “pkg”，执行这个命令会看到他的输出：</p>"}');export{f as comp,F as data};
